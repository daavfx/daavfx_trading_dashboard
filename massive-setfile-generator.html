<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DAAVILEFX MASSIVE Setfile Generator</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: white;
            padding: 40px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #00d9ff, #00ff88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .subtitle { color: #888; margin-bottom: 30px; }
        .card {
            background: rgba(255,255,255,0.1);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }
        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .stat {
            background: rgba(255,255,255,0.05);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }
        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #00d9ff;
        }
        .stat-label { color: #888; font-size: 0.9em; margin-top: 5px; }
        button {
            background: linear-gradient(90deg, #00d9ff, #00ff88);
            color: #1a1a2e;
            border: none;
            padding: 20px 40px;
            font-size: 1.2em;
            font-weight: bold;
            border-radius: 12px;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 40px rgba(0,217,255,0.3);
        }
        button:disabled { opacity: 0.5; cursor: not-allowed; }
        .log {
            background: #000;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.9em;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 20px;
        }
        .log-line { margin: 5px 0; }
        .success { color: #00ff88; }
        .error { color: #ff4444; }
        .info { color: #00d9ff; }
        .progress-bar {
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            margin-top: 20px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d9ff, #00ff88);
            width: 0%;
            transition: width 0.3s;
        }
        .config-section {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 15px 0;
        }
        .config-item {
            background: rgba(255,255,255,0.05);
            padding: 10px;
            border-radius: 8px;
        }
        .config-item label {
            display: block;
            color: #888;
            font-size: 0.8em;
            margin-bottom: 5px;
        }
        .config-item input {
            width: 100%;
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 4px;
            padding: 8px;
            color: white;
            font-size: 0.9em;
        }
        .warning {
            background: rgba(255,193,7,0.1);
            border: 1px solid rgba(255,193,7,0.3);
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            color: #ffc107;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚ö° DAAVILEFX MASSIVE Setfile Generator</h1>
        <p class="subtitle">Generate complete 55,500+ input configuration file</p>
        
        <div class="card">
            <h2>üìä Configuration</h2>
            <div class="config-section">
                <div class="config-item">
                    <label>Magic Number</label>
                    <input type="number" id="magicNumber" value="777">
                </div>
                <div class="config-item">
                    <label>Max Orders</label>
                    <input type="number" id="maxOrders" value="150">
                </div>
                <div class="config-item">
                    <label>Max Groups</label>
                    <input type="number" id="numGroups" value="15" min="1" max="20">
                </div>
            </div>
            
            <h3 style="margin: 20px 0 10px;">Stats Preview</h3>
            <div class="stat-grid">
                <div class="stat">
                    <div class="stat-value" id="totalLogics">630</div>
                    <div class="stat-label">Logic-Directions</div>
                </div>
                <div class="stat">
                    <div class="stat-value">88</div>
                    <div class="stat-label">Fields per Logic</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="totalInputs">55,440</div>
                    <div class="stat-label">Total Inputs</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="fileSize">~2.3 MB</div>
                    <div class="stat-label">File Size</div>
                </div>
            </div>
        </div>
        
        <div class="warning">
            ‚ö†Ô∏è This will generate a large file (~2.3 MB) with 70,000+ lines. 
            Make sure your browser allows large downloads.
        </div>
        
        <button id="generateBtn" onclick="generateSetfile()">
            ‚ö° Generate MASSIVE Setfile
        </button>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        
        <div class="log" id="logBox"></div>
    </div>
    
    <script>
        const GROUPS = 15;
        const ENGINES = ['A', 'B', 'C'];
        const LOGICS = ['Power', 'Repower', 'Scalp', 'Stopper', 'STO', 'SCA', 'RPO'];
        const DIRECTIONS = ['Buy', 'Sell'];
        
        const LOGIC_SUFFIX = {
            'Power': 'P', 'Repower': 'R', 'Scalp': 'S',
            'Stopper': 'T', 'STO': 'O', 'SCA': 'C', 'RPO': 'X'
        };
        
        function log(msg, type = 'info') {
            const logBox = document.getElementById('logBox');
            const line = document.createElement('div');
            line.className = `log-line ${type}`;
            line.textContent = `[${new Date().toLocaleTimeString()}] ${msg}`;
            logBox.appendChild(line);
            logBox.scrollTop = logBox.scrollHeight;
        }
        
        function updateStats() {
            const groups = parseInt(document.getElementById('numGroups').value) || 15;
            const directions = ENGINES.length * LOGICS.length * DIRECTIONS.length;
            const totalLogics = groups * directions;
            const totalInputs = totalLogics * 88;
            const fileSize = (totalInputs * 15) / (1024 * 1024); // ~15 chars per line
            
            document.getElementById('totalLogics').textContent = totalLogics.toLocaleString();
            document.getElementById('totalInputs').textContent = totalInputs.toLocaleString();
            document.getElementById('fileSize').textContent = `~${fileSize.toFixed(1)} MB`;
        }
        
        document.getElementById('numGroups').addEventListener('input', updateStats);
        
        function generateLogicInputs(groupNum, engine, logic, direction, magicNumber, maxOrders) {
            const prefix = `gInput_${groupNum}_${engine}${LOGIC_SUFFIX[logic]}_${direction}`;
            const isPower = logic === 'Power';
            
            // Progressive lot sizing
            let baseLot, maxLot, gridBase;
            if (groupNum <= 5) { baseLot = 0.02; maxLot = 0.20; gridBase = 100; }
            else if (groupNum <= 10) { baseLot = 0.03; maxLot = 0.30; gridBase = 150; }
            else { baseLot = 0.05; maxLot = 0.50; gridBase = 200; }
            
            const lines = [];
            
            // Base settings
            lines.push(`${prefix}_Enabled=1`);
            lines.push(`${prefix}_InitialLot=${baseLot}`);
            lines.push(`${prefix}_LastLot=${maxLot}`);
            lines.push(`${prefix}_Multiplier=${(1.20 + (groupNum * 0.02)).toFixed(2)}`);
            lines.push(`${prefix}_Grid=${gridBase + (groupNum * 20)}`);
            lines.push(`${prefix}_TrailMethod=0`);
            lines.push(`${prefix}_TrailValue=${(5.0 + (groupNum * 0.5)).toFixed(1)}`);
            lines.push(`${prefix}_TrailStart=${groupNum * 2}`);
            lines.push(`${prefix}_TrailStep=${(5.0 + (groupNum * 0.25)).toFixed(1)}`);
            lines.push(`${prefix}_UseTP=1`);
            lines.push(`${prefix}_TakeProfit=${(50.0 + (groupNum * 10)).toFixed(1)}`);
            lines.push(`${prefix}_TPMode=0`);
            lines.push(`${prefix}_UseSL=1`);
            lines.push(`${prefix}_StopLoss=${(30.0 + (groupNum * 5)).toFixed(1)}`);
            lines.push(`${prefix}_SLMode=0`);
            lines.push(`${prefix}_BreakEvenMode=0`);
            lines.push(`${prefix}_BreakEvenActivation=${(20.0 + (groupNum * 2)).toFixed(1)}`);
            lines.push(`${prefix}_BreakEvenLock=${(10.0 + groupNum).toFixed(1)}`);
            lines.push(`${prefix}_BreakEvenTrail=0`);
            lines.push(`${prefix}_ProfitTrailEnabled=0`);
            lines.push(`${prefix}_TriggerType=0`);
            lines.push(`${prefix}_TriggerBars=0`);
            lines.push(`${prefix}_TriggerMinutes=0`);
            lines.push(`${prefix}_TriggerPips=0.0`);
            lines.push(`${prefix}_ReverseReference=0`);
            lines.push(`${prefix}_HedgeReference=0`);
            lines.push(`${prefix}_OrderCountRefLogic=0`);
            lines.push(`${prefix}_ReverseScale=1.0`);
            lines.push(`${prefix}_HedgeScale=1.0`);
            lines.push(`${prefix}_ReverseEnabled=0`);
            lines.push(`${prefix}_HedgeEnabled=0`);
            lines.push(`${prefix}_CloseTargets=0`);
            lines.push(`${prefix}_OrderCountRef=0`);
            lines.push(`${prefix}_StartLevel=0`);
            lines.push(`${prefix}_ResetLotOnRestart=1`);
            lines.push(`${prefix}_RestartPolicy=0`);
            
            // Partial closes
            for (let p = 1; p <= 4; p++) {
                lines.push(`${prefix}_PartialEnabled${p}=0`);
                lines.push(`${prefix}_PartialCycle${p}=${p + 1}`);
                lines.push(`${prefix}_PartialMode${p}=1`);
                lines.push(`${prefix}_PartialBalance${p}=1`);
                lines.push(`${prefix}_PartialTrailMode${p}=0`);
                lines.push(`${prefix}_PartialTrigger${p}=0`);
                lines.push(`${prefix}_PartialProfitThreshold${p}=0.0`);
                lines.push(`${prefix}_PartialHours${p}=0`);
            }
            
            return lines;
        }
        
        async function generateSetfile() {
            const btn = document.getElementById('generateBtn');
            btn.disabled = true;
            btn.textContent = 'Generating...';
            
            document.getElementById('logBox').innerHTML = '';
            document.getElementById('progressFill').style.width = '0%';
            
            const magicNumber = document.getElementById('magicNumber').value;
            const maxOrders = document.getElementById('maxOrders').value;
            const numGroups = parseInt(document.getElementById('numGroups').value) || 15;
            
            try {
                log('Starting MASSIVE setfile generation...', 'info');
                log(`Configuration: ${numGroups} groups, Magic: ${magicNumber}, MaxOrders: ${maxOrders}`, 'info');
                
                const lines = [];
                
                // Header
                lines.push('; DAAVILEFX MASSIVE CONFIGURATION SETFILE');
                lines.push(`; Generated: ${new Date().toISOString()}`);
                lines.push('; Version: 19.0 MASSIVE');
                lines.push('; Platform: MT4');
                lines.push(`; Structure: ${numGroups} groups √ó 3 engines √ó 7 logics √ó 2 directions`);
                lines.push(`; Total Logic-Directions: ${numGroups * ENGINES.length * LOGICS.length * DIRECTIONS.length}`);
                lines.push('; Fields per Logic: 88');
                lines.push('; Generated by Browser - Direct Download');
                lines.push('');
                lines.push('; ============================================');
                lines.push('; GLOBAL SETTINGS');
                lines.push('; ============================================');
                lines.push(`gInput_MagicNumber=${magicNumber}`);
                lines.push(`gInput_MagicNumberBuy=${parseInt(magicNumber) + 111}`);
                lines.push(`gInput_MagicNumberSell=${parseInt(magicNumber) + 222}`);
                lines.push(`gInput_MaxOrders=${maxOrders}`);
                lines.push('');
                
                // Generate logics
                log(`Generating ${numGroups} groups...`, 'info');
                
                for (let group = 1; group <= numGroups; group++) {
                    if (group % 3 === 0) {
                        const progress = (group / numGroups) * 50;
                        document.getElementById('progressFill').style.width = `${progress}%`;
                    }
                    
                    for (const engine of ENGINES) {
                        for (const logic of LOGICS) {
                            for (const direction of DIRECTIONS) {
                                const logicLines = generateLogicInputs(group, engine, logic, direction, magicNumber, maxOrders);
                                lines.push(...logicLines);
                            }
                        }
                    }
                }
                
                // Footer
                lines.push('; ============================================');
                lines.push('; END OF CONFIGURATION');
                lines.push(`; Total Lines: ${lines.length}`);
                lines.push('; ============================================');
                
                log(`Generated ${lines.length.toLocaleString()} lines`, 'success');
                
                // Create and trigger download
                const content = lines.join('\n');
                const blob = new Blob([content], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `DAAVILEFX_MASSIVE_${numGroups}G_${new Date().toISOString().split('T')[0]}.set`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                log('‚úÖ Download started!', 'success');
                log(`File: ${a.download}`, 'success');
                log(`Size: ${(content.length / (1024 * 1024)).toFixed(2)} MB`, 'success');
                
                document.getElementById('progressFill').style.width = '100%';
                
            } catch (error) {
                log(`‚ùå Error: ${error.message}`, 'error');
                console.error(error);
            } finally {
                btn.disabled = false;
                btn.textContent = '‚ö° Generate MASSIVE Setfile';
            }
        }
        
        // Initialize
        updateStats();
        log('Ready to generate MASSIVE setfile', 'info');
    </script>
</body>
</html>
